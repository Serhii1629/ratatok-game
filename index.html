<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>RATATOK</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
  margin:0;
  padding:20px;
  overflow:hidden;
}
button {
  border:none;
  border-radius:16px;
  padding:14px 20px;
  margin:6px;
  font-size:16px;
}
#tapBtn {
  font-size:42px;
  padding:30px;
  background:gold;
}
.card {
  background:#1c1c1c;
  border-radius:18px;
  padding:14px;
  margin:10px 0;
}
.plus {
  position:absolute;
  color:gold;
  font-size:24px;
  animation: fly 1s ease-out forwards;
  pointer-events:none;
}
@keyframes fly {
  from {opacity:1; transform:translateY(0);}
  to {opacity:0; transform:translateY(-60px);}
}
</style>
</head>
<body>

<h1>ğŸ€ RATATOK</h1>

<div class="card">
  <p>ğŸ’° ĞœĞ¾Ğ½ĞµÑ‚Ñ‹: <span id="coins">0</span></p>
  <p>âš¡ Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ: <span id="energy">0</span>/<span id="maxEnergy">0</span></p>
  <p>ğŸ‘† Ğ¢Ğ°Ğ¿: +<span id="tapPower">1</span></p>
  <p>ğŸ¤– ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ñ…Ğ¾Ğ´: <span id="autoIncome">0</span>/ÑĞµĞº</p>
  <p>â­ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ: <span id="level">1</span> (<span id="xp">0</span>/<span id="xpNeed">100</span>)</p>
</div>

<button id="tapBtn">ğŸ€</button>

<div class="card">
  <h3>ğŸ›’ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</h3>
  <button id="upTap"></button>
  <button id="upAuto"></button>
  <button id="upEnergy"></button>
</div>

<script>
// ====== ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜ ======
let coins = +localStorage.getItem("coins") || 0;
let tapPower = +localStorage.getItem("tapPower") || 1;
let autoIncome = +localStorage.getItem("autoIncome") || 0;
let energy = +localStorage.getItem("energy") || 100;
let maxEnergy = +localStorage.getItem("maxEnergy") || 100;
let level = +localStorage.getItem("level") || 1;
let xp = +localStorage.getItem("xp") || 0;
let lastTime = +localStorage.getItem("lastTime") || Date.now();

let tapPrice = +localStorage.getItem("tapPrice") || 10;
let autoPrice = +localStorage.getItem("autoPrice") || 25;
let energyPrice = +localStorage.getItem("energyPrice") || 50;

// ====== ĞĞ¤Ğ¤Ğ›ĞĞ™Ğ Ğ”ĞĞ¥ĞĞ” ======
let diff = Math.floor((Date.now() - lastTime) / 1000);
if (diff > 0) coins += diff * autoIncome;

// ====== Ğ­Ğ›Ğ•ĞœĞ•ĞĞ¢Ğ« ======
const el = id => document.getElementById(id);

// ====== UI ======
function xpNeed() { return level * 100; }

function updateUI() {
  el("coins").textContent = coins;
  el("energy").textContent = energy;
  el("maxEnergy").textContent = maxEnergy;
  el("tapPower").textContent = tapPower;
  el("autoIncome").textContent = autoIncome;
  el("level").textContent = level;
  el("xp").textContent = xp;
  el("xpNeed").textContent = xpNeed();
  el("upTap").textContent = `â• Ğ¢Ğ°Ğ¿ (${tapPrice})`;
  el("upAuto").textContent = `ğŸ¤– ĞĞ²Ñ‚Ğ¾ (${autoPrice})`;
  el("upEnergy").textContent = `âš¡ Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ (${energyPrice})`;
}
updateUI();

// ====== Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ• ======
function save() {
  localStorage.setItem("coins", coins);
  localStorage.setItem("tapPower", tapPower);
  localStorage.setItem("autoIncome", autoIncome);
  localStorage.setItem("energy", energy);
  localStorage.setItem("maxEnergy", maxEnergy);
  localStorage.setItem("level", level);
  localStorage.setItem("xp", xp);
  localStorage.setItem("tapPrice", tapPrice);
  localStorage.setItem("autoPrice", autoPrice);
  localStorage.setItem("energyPrice", energyPrice);
  localStorage.setItem("lastTime", Date.now());
}

// ====== Ğ¢ĞĞŸ ======
el("tapBtn").onclick = () => {
  if (energy <= 0) return;
  energy--;
  coins += tapPower;
  xp += tapPower;

  if (xp >= xpNeed()) {
    xp = 0;
    level++;
  }

  save();
  updateUI();

  const plus = document.createElement("div");
  plus.className = "plus";
  plus.textContent = "+" + tapPower;
  const r = el("tapBtn").getBoundingClientRect();
  plus.style.left = r.left + r.width/2 + "px";
  plus.style.top = r.top + "px";
  document.body.appendChild(plus);
  setTimeout(() => plus.remove(), 1000);
};

// ====== ĞœĞĞ“ĞĞ—Ğ˜Ğ ======
el("upTap").onclick = () => {
  if (coins < tapPrice) return;
  coins -= tapPrice;
  tapPower++;
  tapPrice = Math.floor(tapPrice * 1.6);
  save(); updateUI();
};

el("upAuto").onclick = () => {
  if (coins < autoPrice) return;
  coins -= autoPrice;
  autoIncome++;
  autoPrice = Math.floor(autoPrice * 1.7);
  save(); updateUI();
};

el("upEnergy").onclick = () => {
  if (coins < energyPrice) return;
  coins -= energyPrice;
  maxEnergy += 10;
  energyPrice = Math.floor(energyPrice * 1.8);
  save(); updateUI();
};

// ====== Ğ¢ĞĞ™ĞœĞ•Ğ Ğ« ======
setInterval(() => {
  if (energy < maxEnergy) energy++;
  save(); updateUI();
}, 2000);

setInterval(() => {
  coins += autoIncome;
  save(); updateUI();
}, 1000);
</script>

</body>
</html>
