<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>RATATOK</title>

<style>
*{
  box-sizing:border-box;
  -webkit-tap-highlight-color: transparent;
}
body{
  margin:0;
  background:#0b0b0f;
  color:white;
  font-family:Arial, sans-serif;
  overflow:hidden;
}
#top{
  display:flex;
  justify-content:space-between;
  padding:10px;
  font-size:18px;
}
#game{
  display:flex;
  justify-content:center;
  align-items:center;
  height:60vh;
}
#rat{
  width:220px;
  height:220px;
  background:url("https://i.imgur.com/2yaf2wb.png") center/contain no-repeat;
  touch-action: manipulation;
}
#menu{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  display:flex;
  background:#111;
}
.btn{
  flex:1;
  padding:15px;
  text-align:center;
  font-size:16px;
  border:none;
  background:#1c1c28;
  color:white;
}
.btn:active{
  background:#333;
}
.hidden{display:none;}
.panel{
  position:fixed;
  bottom:60px;
  left:0;
  width:100%;
  background:#14141c;
  padding:15px;
}
</style>
</head>

<body>

<div id="top">
  <div>‚ö° <span id="energy">1000</span></div>
  <div>üí∞ <span id="coins">0</span></div>
</div>

<div id="game">
  <div id="rat"></div>
</div>

<div id="shop" class="panel hidden">
  <h3>üõí –ú–∞–≥–∞–∑–∏–Ω</h3>
  <button class="btn" onclick="buyEnergy()">+100 –≠–Ω–µ—Ä–≥–∏–∏ (100üí∞)</button>
</div>

<div id="ref" class="panel hidden">
  <h3>üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</h3>
  <p>–¢–≤–æ—è —Å—Å—ã–ª–∫–∞:</p>
  <small id="refLink"></small>
</div>

<div id="menu">
  <button class="btn" onclick="showPanel()">üéÆ –ò–≥—Ä–∞—Ç—å</button>
  <button class="btn" onclick="openShop()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
  <button class="btn" onclick="openRef()">üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";

const firebaseConfig = {
  apiKey: "AIzaSyB1Ln1WuJyjqFPEE6NblANZj-2P7SS7b40",
  authDomain: "ratatok-33746.firebaseapp.com",
  projectId: "ratatok-33746",
  storageBucket: "ratatok-33746.firebasestorage.app",
  messagingSenderId: "959368453562",
  appId: "1:959368453562:web:35c128b473b74029a71183"
};
initializeApp(firebaseConfig);
</script>

<script>
let coins = Number(localStorage.getItem("coins")) || 0;
let energy = Number(localStorage.getItem("energy")) || 1000;

const coinsEl = document.getElementById("coins");
const energyEl = document.getElementById("energy");
const rat = document.getElementById("rat");

function update(){
  coinsEl.textContent = coins;
  energyEl.textContent = energy;
  localStorage.setItem("coins", coins);
  localStorage.setItem("energy", energy);
}
update();

// –¢–ê–ü (–û–î–ò–ù –†–ê–ó)
rat.addEventListener("touchstart", e=>{
  e.preventDefault();
  if(energy<=0) return;
  energy--;
  coins++;
  update();
},{passive:false});

function openShop(){
  hideAll();
  document.getElementById("shop").classList.remove("hidden");
}
function openRef(){
  hideAll();
  document.getElementById("ref").classList.remove("hidden");
}
function showPanel(){
  hideAll();
}
function hideAll(){
  document.getElementById("shop").classList.add("hidden");
  document.getElementById("ref").classList.add("hidden");
}
function buyEnergy(){
  if(coins>=100){
    coins-=100;
    energy+=100;
    update();
  }
}

// —Ä–µ—Ñ —Å—Å—ã–ª–∫–∞
const uid = Math.floor(Math.random()*999999);
document.getElementById("refLink").textContent =
`https://t.me/–¢–í–û–ô_–ë–û–¢?start=${uid}`;
</script>

</body>
</html>
