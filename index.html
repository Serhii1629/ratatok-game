<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RATATOK</title>

<style>
* {
    box-sizing: border-box;
    user-select: none;
}

body {
    margin: 0;
    background: #0e0e0e;
    color: white;
    font-family: Arial, sans-serif;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

.header {
    text-align: center;
    padding: 20px;
}

.header h1 {
    margin: 0;
    font-size: 26px;
}

.stats {
    margin-top: 10px;
    font-size: 18px;
}

.screen {
    flex: 1;
    display: none;
    padding: 20px;
}

.screen.active {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* GAME */
.tap-btn {
    width: 240px;
    height: 240px;
    border-radius: 40px;
    background: #ffd400;
    border: none;
    font-size: 120px;
}

.tap-btn:active {
    transform: scale(0.93);
}

/* SHOP */
.shop-item {
    width: 100%;
    max-width: 320px;
    background: #161616;
    padding: 15px;
    border-radius: 15px;
    margin-bottom: 15px;
    text-align: center;
}

.shop-item button {
    margin-top: 10px;
    padding: 12px;
    width: 100%;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    background: #ffd400;
}

/* REF */
.ref-box {
    background: #161616;
    padding: 15px;
    border-radius: 15px;
    width: 100%;
    max-width: 320px;
    text-align: center;
}

.ref-box input {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: none;
    margin-top: 10px;
}

/* MENU */
.menu {
    display: flex;
    justify-content: space-around;
    background: #161616;
    padding: 12px 0;
    border-top: 1px solid #222;
}

.menu button {
    background: none;
    border: none;
    color: #aaa;
    font-size: 14px;
}

.menu button.active {
    color: #ffd400;
}
</style>
</head>

<body>

<div class="header">
    <h1 id="ratName">üêÄ FAST RAT</h1>
    <div class="stats">
        –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span><br>
        –ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span><br>
        –î–æ—Ö–æ–¥: <span id="power">1</span> / —Ç–∞–ø
    </div>
</div>

<!-- GAME -->
<div id="game" class="screen active">
    <button class="tap-btn" onclick="tap()">üêÄ</button>
</div>

<!-- SHOP -->
<div id="shop" class="screen">
    <div class="shop-item">
        <h3>‚ö° –£—Å–∏–ª–µ–Ω–∏–µ —Ç–∞–ø–∞</h3>
        <p>+1 –º–æ–Ω–µ—Ç–∞ –∑–∞ —Ç–∞–ø</p>
        <p>–¶–µ–Ω–∞: <span id="shopPrice">100</span></p>
        <button onclick="buyPower()">–ö—É–ø–∏—Ç—å</button>
    </div>
</div>

<!-- REF -->
<div id="refs" class="screen">
    <div class="ref-box">
        <h3>üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</h3>
        <p>–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π (—Å–∫–æ—Ä–æ –Ω–∞–≥—Ä–∞–¥—ã)</p>
        <input id="refLink" readonly>
    </div>
</div>

<!-- MENU -->
<div class="menu">
    <button class="active" onclick="openTab('game')">üêÄ –ò–≥—Ä–∞</button>
    <button onclick="openTab('refs')">üë• –†–µ—Ñ—ã</button>
    <button onclick="openTab('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
</div>

<script>
let coins = parseInt(localStorage.getItem("coins")) || 0;
let level = parseInt(localStorage.getItem("level")) || 1;
let power = parseInt(localStorage.getItem("power")) || 1;

const rats = [
    "üêÄ FAST RAT",
    "üêÅ SMART RAT",
    "üê≠ GOLD RAT",
    "üëë KING RAT"
];

updateUI();

function tap() {
    coins += power;
    if (coins >= level * 200) level++;
    save();
    updateUI();
}

function buyPower() {
    const price = power * 100;
    if (coins >= price) {
        coins -= price;
        power++;
        save();
        updateUI();
    } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç");
    }
}

function updateUI() {
    document.getElementById("coins").innerText = coins;
    document.getElementById("level").innerText = level;
    document.getElementById("power").innerText = power;
    document.getElementById("shopPrice").innerText = power * 100;
    document.getElementById("ratName").innerText =
        rats[Math.min(level - 1, rats.length - 1)];
    
    document.getElementById("refLink").value =
        "https://t.me/Ratatok_bot?start=" + (localStorage.getItem("uid") || genUID());
}

function save() {
    localStorage.setItem("coins", coins);
    localStorage.setItem("level", level);
    localStorage.setItem("power", power);
}

function openTab(tab) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.querySelectorAll(".menu button").forEach(b => b.classList.remove("active"));

    document.getElementById(tab).classList.add("active");
    event.target.classList.add("active");
}

function genUID() {
    const id = Math.random().toString(36).substring(2, 10);
    localStorage.setItem("uid", id);
    return id;
}
</script>

</body>
</html>
