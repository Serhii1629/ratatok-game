<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>RATATOK</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background:#111;
  color:white;
  text-align:center;
  font-family:Arial;
  margin-top:40px;
  overflow:hidden;
}
button {
  font-size:18px;
  padding:15px 20px;
  margin:10px;
  border-radius:15px;
  border:none;
}
#tapBtn {
  font-size:40px;
  padding:30px;
  background:gold;
}
.shop {
  background:#222;
  padding:15px;
  border-radius:15px;
  margin:15px;
}
.plus {
  position:absolute;
  color:gold;
  font-size:24px;
  animation: fly 1s ease-out forwards;
  pointer-events:none;
}
@keyframes fly {
  from {opacity:1; transform:translateY(0);}
  to {opacity:0; transform:translateY(-50px);}
}
</style>
</head>
<body>

<h1>ğŸ€ RATATOK</h1>

<p>ğŸ’° ĞœĞ¾Ğ½ĞµÑ‚Ñ‹: <span id="coins">0</span></p>
<p>âš¡ Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ: <span id="energy">100</span></p>
<p>ğŸ‘† Ğ—Ğ° Ñ‚Ğ°Ğ¿: <span id="tapPower">1</span></p>
<p>ğŸ¤– ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ñ…Ğ¾Ğ´: <span id="autoIncome">0</span>/ÑĞµĞº</p>

<button id="tapBtn">ğŸ€</button>

<div class="shop">
  <h2>ğŸ›’ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</h2>
  <button id="upgradeTap">â• Ğ¡Ğ¸Ğ»Ğ° Ñ‚Ğ°Ğ¿Ğ° (10)</button>
  <button id="upgradeAuto">ğŸ¤– ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ñ…Ğ¾Ğ´ (25)</button>
</div>

<script>
const maxEnergy = 100;

// Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
let coins = Number(localStorage.getItem("coins")) || 0;
let energy = Number(localStorage.getItem("energy")) || maxEnergy;
let tapPower = Number(localStorage.getItem("tapPower")) || 1;
let autoIncome = Number(localStorage.getItem("autoIncome")) || 0;

let tapPrice = Number(localStorage.getItem("tapPrice")) || 10;
let autoPrice = Number(localStorage.getItem("autoPrice")) || 25;

// ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹
const coinsEl = document.getElementById("coins");
const energyEl = document.getElementById("energy");
const tapPowerEl = document.getElementById("tapPower");
const autoIncomeEl = document.getElementById("autoIncome");
const tapBtn = document.getElementById("tapBtn");
const upgradeTapBtn = document.getElementById("upgradeTap");
const upgradeAutoBtn = document.getElementById("upgradeAuto");

// Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI
function updateUI() {
  coinsEl.textContent = coins;
  energyEl.textContent = energy;
  tapPowerEl.textContent = tapPower;
  autoIncomeEl.textContent = autoIncome;
  upgradeTapBtn.textContent = `â• Ğ¡Ğ¸Ğ»Ğ° Ñ‚Ğ°Ğ¿Ğ° (${tapPrice})`;
  upgradeAutoBtn.textContent = `ğŸ¤– ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ñ…Ğ¾Ğ´ (${autoPrice})`;
}
updateUI();

// Ñ‚Ğ°Ğ¿
tapBtn.addEventListener("click", () => {
  if (energy <= 0) return;

  coins += tapPower;
  energy--;

  save();
  updateUI();

  const plus = document.createElement("div");
  plus.className = "plus";
  plus.textContent = "+" + tapPower;
  const r = tapBtn.getBoundingClientRect();
  plus.style.left = r.left + r.width/2 + "px";
  plus.style.top = r.top + "px";
  document.body.appendChild(plus);
  setTimeout(() => plus.remove(), 1000);
});

// Ğ°Ğ¿Ğ³Ñ€ĞµĞ¹Ğ´ Ñ‚Ğ°Ğ¿Ğ°
upgradeTapBtn.onclick = () => {
  if (coins < tapPrice) return;
  coins -= tapPrice;
  tapPower++;
  tapPrice = Math.floor(tapPrice * 1.5);
  save();
  updateUI();
};

// Ğ°Ğ¿Ğ³Ñ€ĞµĞ¹Ğ´ Ğ°Ğ²Ñ‚Ğ¾
upgradeAutoBtn.onclick = () => {
  if (coins < autoPrice) return;
  coins -= autoPrice;
  autoIncome++;
  autoPrice = Math.floor(autoPrice * 1.7);
  save();
  updateUI();
};

// Ğ°Ğ²Ñ‚Ğ¾Ğ´Ğ¾Ñ…Ğ¾Ğ´
setInterval(() => {
  if (autoIncome > 0) {
    coins += autoIncome;
    save();
    updateUI();
  }
}, 1000);

// Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸
setInterval(() => {
  if (energy < maxEnergy) {
    energy++;
    save();
    updateUI();
  }
}, 2000);

// ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
function save() {
  localStorage.setItem("coins", coins);
  localStorage.setItem("energy", energy);
  localStorage.setItem("tapPower", tapPower);
  localStorage.setItem("autoIncome", autoIncome);
  localStorage.setItem("tapPrice", tapPrice);
  localStorage.setItem("autoPrice", autoPrice);
}
</script>

</body>
</html>
