<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RATATOK Clicker</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#0b0b0f;color:#fff;overflow-x:hidden}
#top{display:flex;justify-content:space-around;padding:12px;background:#111;font-size:16px;font-weight:bold}
#tapArea{display:flex;justify-content:center;align-items:center;height:50vh}
#rat{width:250px;height:250px;background-size:contain;background-position:center;background-repeat:no-repeat;cursor:pointer;transition:transform .1s}
#rat.tap{transform:scale(1.1)}
#menu{position:fixed;bottom:0;width:100%;display:flex}
button{flex:1;padding:14px;border:none;background:#1c1c28;color:#fff;font-size:14px;cursor:pointer}
button:active{background:#333}
.panel{display:none;position:fixed;bottom:52px;width:100%;max-height:50vh;overflow:auto;background:#14141c;padding:10px}
.card{background:#1e1e2c;padding:10px;border-radius:10px;margin-bottom:8px;transition:0.2s}
.card:hover{background:#2c2c44}
.card button{width:100%;margin-top:6px}
.legendary{border:2px solid gold;box-shadow:0 0 10px gold}
.rare{border:2px solid #3b82f6}
.common{border:2px solid #555}
</style>
</head>
<body>

<div id="top">
  <div>ğŸ’° <span id="coins">0</span></div>
  <div>âš¡ <span id="energy">100</span></div>
  <div>â­ <span id="level">1</span></div>
</div>

<div id="tapArea">
  <div id="rat"></div>
</div>

<div id="shop" class="panel">
  <h3>ğŸ›’ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</h3>
  <div id="shopItems"></div>
</div>

<div id="cards" class="panel">
  <h3>ğŸƒ ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸</h3>
  <div id="cardItems"></div>
</div>

<div id="ref" class="panel">
  <h3>ğŸ”— Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑÑ‹Ğ»ĞºĞ°</h3>
  <button onclick="claimReferral()">ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑ</button>
  <p id="refLink" style="word-break:break-all"></p>
</div>

<div id="menu">
  <button onclick="hidePanels()">ğŸ®</button>
  <button onclick="showPanel('shop')">ğŸ›’</button>
  <button onclick="showPanel('cards')">ğŸƒ</button>
  <button onclick="showPanel('ref')">ğŸ”—</button>
</div>

<script>
// ---------- Ğ”ĞĞĞĞ«Ğ• ----------
const RATS = [
 {lvl:1, img:"https://i.imgur.com/2yaf2wb.png", taps:0},
 {lvl:2, img:"https://i.imgur.com/6X6Jv6s.png", taps:1000},
 {lvl:3, img:"https://i.imgur.com/m7YQZ9Z.png", taps:10000},
 {lvl:4, img:"https://i.imgur.com/p3xx6Gr.png", taps:100000},
 {lvl:5, img:"https://i.imgur.com/4mjX4L9.png", taps:1000000}
];

const SHOP = [
 {id:1,name:"Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ +50",energy:50,price:50,rarity:"common"},
 {id:2,name:"ĞĞ²Ñ‚Ğ¾ĞºĞ»Ğ¸ĞºĞµÑ€ +1/ÑĞµĞº",auto:1,price:200,rarity:"rare"},
 {id:3,name:"ĞĞ²Ñ‚Ğ¾ĞºĞ»Ğ¸ĞºĞµÑ€ +5/ÑĞµĞº",auto:5,price:1000,rarity:"legendary"}
];

const CARDS = [
 {id:1,name:"+1 Ğ·Ğ° Ñ‚Ğ°Ğ¿",tap:1,price:50,rarity:"common"},
 {id:2,name:"+5 Ğ·Ğ° Ñ‚Ğ°Ğ¿",tap:5,price:200,rarity:"rare"},
 {id:3,name:"+10 Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ğ¾/ÑĞµĞº",passive:10,price:500,rarity:"rare"},
 {id:4,name:"+50 Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ğ¾/ÑĞµĞº",passive:50,price:2000,rarity:"legendary"},
 {id:5,name:"+100 Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ğ¾/ÑĞµĞº",passive:100,price:5000,rarity:"legendary"}
];

// ---------- Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• ----------
let state = JSON.parse(localStorage.getItem("ratatok")) || {
 coins:0,
 energy:100,
 tap:1,
 auto:0,
 passive:0,
 level:1,
 taps:0,
 cards:{},
 refClaimed:false
};

// ---------- Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ• ----------
function save(){localStorage.setItem("ratatok",JSON.stringify(state))}

// ---------- UI ----------
const coinsEl = document.getElementById("coins")
const energyEl = document.getElementById("energy")
const levelEl = document.getElementById("level")
const ratEl = document.getElementById("rat")
const shopItems = document.getElementById("shopItems")
const cardItems = document.getElementById("cardItems")
const refLinkEl = document.getElementById("refLink")

function updateUI(){
 coinsEl.textContent = state.coins
 energyEl.textContent = state.energy
 levelEl.textContent = state.level

 let rat = RATS[0]
 for(let r of RATS){if(state.taps>=r.taps) rat=r}
 ratEl.style.backgroundImage = `url(${rat.img})`

 renderShop()
 renderCards()
 initRef()
 save()
}

// ---------- Ğ¢ĞĞŸ ----------
ratEl.onclick = ()=>{
 if(state.energy<=0) return
 state.energy--
 state.coins += state.tap
 state.taps++
 if(state.taps >= state.level*1000) state.level++
 ratEl.classList.add("tap")
 setTimeout(()=>ratEl.classList.remove("tap"),100)
 updateUI()
}

// ---------- ĞĞ’Ğ¢ĞĞšĞ›Ğ˜ĞšĞ•Ğ  ----------
setInterval(()=>{
 if(state.auto>0) state.coins += state.auto
 if(state.passive>0) state.coins += state.passive
 updateUI()
},1000)

// ---------- ĞœĞĞ“ĞĞ—Ğ˜Ğ ----------
function renderShop(){
 shopItems.innerHTML = ""
 SHOP.forEach(i=>{
   shopItems.innerHTML += `<div class="card ${i.rarity}">
     ${i.name}<br>Ğ¦ĞµĞ½Ğ°: ${i.price} ğŸ’°
     <button onclick="buyShop(${i.id})" ${state.coins<i.price?'disabled':''}>ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ</button>
   </div>`
 })
}
function buyShop(id){
 let item = SHOP.find(x=>x.id==id)
 if(state.coins < item.price) return
 state.coins -= item.price
 if(item.energy) state.energy += item.energy
 if(item.auto) state.auto += item.auto
 updateUI()
}

// ---------- ĞšĞĞ Ğ¢ĞĞ§ĞšĞ˜ ----------
function renderCards(){
 cardItems.innerHTML=""
 CARDS.forEach(c=>{
   let lvl = state.cards[c.id]||0
   let price = c.price*(lvl+1)
   cardItems.innerHTML += `<div class="card ${c.rarity}">
     ${c.name} (ÑƒÑ€ ${lvl})<br>Ğ¦ĞµĞ½Ğ°: ${price} ğŸ’°
     <button onclick="buyCard(${c.id})" ${state.coins<price?'disabled':''}>ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ</button>
   </div>`
 })
}
function buyCard(id){
 let c = CARDS.find(x=>x.id==id)
 let lvl = state.cards[id]||0
 let price = c.price*(lvl+1)
 if(state.coins < price) return
 state.coins -= price
 state.cards[id] = lvl+1
 if(c.tap) state.tap += c.tap
 if(c.auto) state.auto += c.auto
 if(c.passive) state.passive += c.passive
 renderCards()
 updateUI()
}

// ---------- Ğ Ğ•Ğ¤Ğ•Ğ ĞĞ› ----------
function initRef(){
 let id = localStorage.getItem("refid")
 if(!id){
   id = Math.random().toString(36).substr(2,8)
   localStorage.setItem("refid",id)
 }
 refLinkEl.textContent = location.origin + location.pathname + "?ref=" + id
}
function claimReferral(){
 if(!state.refClaimed){
   state.coins += 500
   state.refClaimed = true
   alert("Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ 500 Ğ¼Ğ¾Ğ½ĞµÑ‚ Ğ·Ğ° Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»!")
   updateUI()
 } else alert("Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ¾Ğ½ÑƒÑ ÑƒĞ¶Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½")
}

// ---------- ĞŸĞĞĞ•Ğ›Ğ˜ ----------
function showPanel(id){hidePanels(); document.getElementById(id).style.display="block"}
function hidePanels(){document.querySelectorAll(".panel").forEach(p=>p.style.display="none")}

// ---------- Ğ˜ĞĞ˜Ğ¦Ğ˜ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ ----------
renderShop()
renderCards()
initRef()
updateUI()
</script>

</body>
</html>
